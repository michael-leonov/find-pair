(()=>{"use strict";const e=()=>{};window.statusComplexity={status:0};const t="../static/spades_img/",s={ace:`${t}ace_spades.jpg`,king:`${t}king_spades.jpg`,queen:`${t}queen_spades.jpg`,jack:`${t}jack_spades.jpg`,ten:`${t}ten_spades.jpg`,nine:`${t}nine_spades.jpg`,eight:`${t}eight_spades.jpg`,seven:`${t}seven_spades.jpg`,six:`${t}six_spades.jpg`},a=[].map.call(document.querySelectorAll("[data-complexity]"),(e=>e)),n=document.querySelector(".start-btn");var i;(i=a).forEach((e=>e.addEventListener("click",(()=>{i.forEach((e=>{e.classList.remove("choosen")})),e.classList.toggle("choosen"),e.classList.contains("choosen")?(window.statusComplexity.status=Number(e.dataset.complexity),n.disabled=!1):delete window.tatusComplexity.status})))),n.addEventListener("click",(t=>{t.preventDefault(),0===window.statusComplexity.status?(document.querySelector(".complexity__inner").append("Сложность не выбрана"),t.target.disabled=!0):function({method:t="GET",url:s,type:a="json",onSuccess:n=e,onError:i=e}){const o=new XMLHttpRequest;o.open(t,s),o.responseType=a,o.send(),o.addEventListener("load",(()=>{200===o.status?n(o.response):i(o.response||"Неизвестная ошибка")})),o.addEventListener("error",(()=>{i("Сеть недоступна")}))}({url:"./field.html",type:"text",onSuccess:e=>{document.body.innerHTML=e;const t=document.querySelector(".field__main"),a=window.statusComplexity.status;!function(){for(let e=0;e<3*a;e++)for(let a=0;a<2;a++){const a=document.createElement("div");a.classList.add("card-wrapper"),a.dataset.rang=Object.keys(s)[e];const n=new Image;n.src=Object.values(s)[e],n.classList.add("shirt-front"),a.appendChild(n);const i=new Image;i.src="../static/shirt-card.jpg",i.classList.add("shirt-back"),a.appendChild(i),t.appendChild(a)}}();const n=document.querySelectorAll(".card-wrapper");n.forEach((e=>{e.classList.add("flip"),e.style.pointerEvents="none",setTimeout((()=>{e.classList.remove("flip"),e.style.pointerEvents="auto"}),5e3)}));let i,o,c=!1,r=!1;function d(){if(!r&&this!==i){if(this.classList.add("flip"),!c)return c=!0,void(i=this);o=this,i.dataset.rang===o.dataset.rang?(i.removeEventListener("click",d),o.removeEventListener("click",d),l()):(r=!0,setTimeout((()=>{i.classList.remove("flip"),o.classList.remove("flip"),l(),alert("Проиграли!")}),500)),Array.from(n).every((e=>e.classList.contains("flip")))&&alert("Победили!")}}function l(){[c,r]=[!1,!1],[i,o]=[null,null]}n.forEach((e=>{const t=Math.floor(Math.random()*(3*a));e.style.order=t})),n.forEach((e=>e.addEventListener("click",d)))}})}))})();